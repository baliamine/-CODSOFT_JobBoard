{"ast":null,"code":"import UseOfferContext from\"../../hooks/UseOfferContext\";import{useState}from\"react\";import OfferForm from\"../OfferForm/index\";import\"./offerDetails.css\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const OfferDetails=_ref=>{let{offer}=_ref;const idEmployer=offer.idEmployer;const{dispatch}=UseOfferContext();const Navigate=useNavigate();const[popup,setPopup]=useState(false);const handleDelete=async()=>{try{const response=await fetch(`/api/offer/delete-offer/${offer._id}`,{method:\"DELETE\"});const data=await response.json();if(data.message===\"Offer job deleted successfully\"){dispatch({type:\"DELETE_OFFER\",payload:{_id:offer._id}});}else{console.error(\"Failed to delete offer:\",data.message);}}catch(error){console.error(\"Error deleting offer:\",error);}};const handleNavigate=()=>{Navigate(\"/JobDetails\",{state:{idEmployer,offer}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offer-details\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"offer-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"offer-title\",children:offer.title}),/*#__PURE__*/_jsx(\"p\",{className:\"offer-company\",children:offer.company}),/*#__PURE__*/_jsx(\"p\",{className:\"offer-location\",children:offer.location}),/*#__PURE__*/_jsx(\"p\",{className:\"offer-contact\",children:offer.candidatures}),console.log('offer.candidatures',offer.candidatures),/*#__PURE__*/_jsxs(\"p\",{className:\"offer-publication-date\",children:[\"Posted on: \",offer.publicationDate]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"offer-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"offer-description\",children:offer.description}),/*#__PURE__*/_jsx(\"h3\",{className:\"offer-requirements-title\",children:\"Requirements\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"offer-requirements\",children:offer.requirements&&offer.requirements.split(\",\").map((req,index)=>/*#__PURE__*/_jsx(\"li\",{children:req.trim()},index))}),/*#__PURE__*/_jsxs(\"p\",{className:\"offer-salary\",children:[\"Salary: \",offer.salary,\"dt\"]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"offer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPopup(true),className:\"edit-btn\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"delete-btn\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNavigate,className:\"see-more-btn\",children:\"See more\"})]})]}),popup&&/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",id:\"popup_id\",children:[/*#__PURE__*/_jsx(OfferForm,{data:offer,className:\"offer-form-popup\",onClose:()=>setPopup(false)}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setPopup(false),children:\"X\"})]})]});};export default OfferDetails;","map":{"version":3,"names":["UseOfferContext","useState","OfferForm","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OfferDetails","_ref","offer","idEmployer","dispatch","Navigate","popup","setPopup","handleDelete","response","fetch","_id","method","data","json","message","type","payload","console","error","handleNavigate","state","children","className","title","company","location","candidatures","log","publicationDate","description","requirements","split","map","req","index","trim","salary","onClick","id","onClose"],"sources":["C:/Users/DELL/OneDrive/Desktop/MERN STACK/frontend/src/components/OfferDetails/index.js"],"sourcesContent":["import UseOfferContext from \"../../hooks/UseOfferContext\";\r\nimport { useState } from \"react\";\r\nimport OfferForm from \"../OfferForm/index\";\r\nimport \"./offerDetails.css\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst OfferDetails = ({ offer }) => {\r\n  const idEmployer = offer.idEmployer;\r\n  const { dispatch } = UseOfferContext();\r\n  const Navigate = useNavigate();\r\n\r\n  const [popup, setPopup] = useState(false);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const response = await fetch(`/api/offer/delete-offer/${offer._id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n      const data = await response.json();\r\n      if (data.message === \"Offer job deleted successfully\") {\r\n        dispatch({ type: \"DELETE_OFFER\", payload: { _id: offer._id } });\r\n      } else {\r\n        console.error(\"Failed to delete offer:\", data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting offer:\", error);\r\n    }\r\n  };\r\n\r\n  const handleNavigate = () => {\r\n    Navigate(\"/JobDetails\", { state: { idEmployer, offer } });\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"offer-details\">\r\n        <header className=\"offer-header\">\r\n          <h1 className=\"offer-title\">{offer.title}</h1>\r\n          <p className=\"offer-company\">{offer.company}</p>\r\n          <p className=\"offer-location\">{offer.location}</p>\r\n          <p className=\"offer-contact\">{offer.candidatures}</p>\r\n         { console.log('offer.candidatures', offer.candidatures)}\r\n          <p className=\"offer-publication-date\">\r\n            Posted on: {offer.publicationDate}\r\n          </p>\r\n        </header>\r\n        <section className=\"offer-body\">\r\n          <p className=\"offer-description\">{offer.description}</p>\r\n          <h3 className=\"offer-requirements-title\">Requirements</h3>\r\n          <ul className=\"offer-requirements\">\r\n            {offer.requirements &&\r\n              offer.requirements\r\n                .split(\",\")\r\n                .map((req, index) => <li key={index}>{req.trim()}</li>)}\r\n          </ul>\r\n          <p className=\"offer-salary\">Salary: {offer.salary}dt</p>\r\n        </section>\r\n        <footer className=\"offer-actions\">\r\n          <button onClick={() => setPopup(true)} className=\"edit-btn\">\r\n            Edit\r\n          </button>\r\n          <button onClick={handleDelete} className=\"delete-btn\">\r\n            Delete\r\n          </button>\r\n          <button onClick={handleNavigate} className=\"see-more-btn\">\r\n            See more\r\n          </button>\r\n        </footer>\r\n      </div>\r\n\r\n      {popup && (\r\n        <div className=\"popup\" id=\"popup_id\">\r\n          <OfferForm\r\n            data={offer}\r\n            className=\"offer-form-popup\"\r\n            onClose={() => setPopup(false)}\r\n          />\r\n          <button className=\"close-button\" onClick={() => setPopup(false)}>\r\n            X\r\n          </button>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OfferDetails;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}